name: Branch Protection

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  check:
    name: PR Requirements Check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Check PR title
        run: |
          TITLE="${{ github.event.pull_request.title }}"
          if [[ ! "$TITLE" =~ ^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .+ ]]; then
            echo "PR title must follow conventional commit format"
            echo "Format: type(scope): description"
            echo "Types: feat, fix, docs, style, refactor, test, chore"
            exit 1
          fi
      
      - name: Check required status checks
        run: |
          echo "Waiting for required status checks to pass..."
          echo "Required checks: test, lint, build"
